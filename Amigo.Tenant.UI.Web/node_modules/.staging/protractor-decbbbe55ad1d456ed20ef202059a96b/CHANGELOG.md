 # 5.2.2
 ## Fixes
- ([b3c7404](https://github.com/angular/protractor/commit/b3c7404258db55a71e7bc4520973c0665cb0ff06))
  Revert "fix(jasmine): Update Jasmine to support Node8 async/await (#4608)"
  This reverts commit 5d13b00bca651227eb55616363f7d7eb8a91f8e8.
  This commit is unnecessary now, revert this commit to avoid breaking changes in 5.2.1

- ([8e5ad1f](https://github.com/angular/protractor/commit/8e5ad1f9b01ec4629fa079609aa8bedee52f0722))
  fix(doc): remove unnecessary config in debugging doc/example (#4622)

# 5.2.1
## Features
- ([a62efc6](https://github.com/angular/protractor/commit/a62efc6e401bc1aa7408e3008ccdaa219b528636))
  feat(locators): Add support for regex in cssContainingText (#4532)

## Fixes
- ([e51f0ec](https://github.com/angular/protractor/commit/e51f0ecb31b7eb361dbf8feaa201ad2fccf9cf14))
  fix(doc): update doc for testing with node 8 async/await and chrome inspector. (#4613)
- ([b204a83](https://github.com/angular/protractor/commit/b204a835976088131f209a5f873f9f786fa05a2e))
  doc(browser-support) improved Firefox documentation (#4553)
- ([8d71a1b](https://github.com/angular/protractor/commit/8d71a1b1b1d314bf0a4ef8c7ecefdd1c7688032e))
  docs(page-objects.md): Refactor the existing Page Object example (#4576)
- ([95dd3ca](https://github.com/angular/protractor/commit/95dd3caf4b90b2d42aa1d5b35b0fd48504f802c3))
  doc(tutorial): added example for element.getAttribute('value') to read text from an input (#4566)

## Dependencies

- ([bb63ab0](https://github.com/angular/protractor/commit/bb63ab00046fc300d898a39c03fb6d974fe20b57))
  Update to the latest blocking proxy (#4546)

## Breaking Changes
- ([5d13b00](https://github.com/angular/protractor/commit/5d13b00bca651227eb55616363f7d7eb8a91f8e8))
  fix(jasmine): Update Jasmine to support Node8 async/await (#4608)

  Breaking change for TypeScript:
  JasmineWD doesn't know anything about async/await, turns off JasmineWD if control flow was
  disabled.

  It will affect TypeScript tests that are using async/await and

  a. miss some await keyword in the test.(Previously, this might cause the
  test failed silently and be reported as pass), or

  b. use Promise in jasmine expect function

  **Before**
    ```ts
  await expect(getPromise()).toEqual(42);
    ```
  **After**
    ```ts
  expect(await getPromise()).toEqual(42);
    ```

# 5.2.0

## Fixes
- ([f7e17f3](https://github.com/angular/protractor/commit/f7e17f348e738e1a594870d7ff735f2b7ea1853f))
  fix(clientSideScripts): change protractor to support waiting for hybrid app (#4512)

- ([4b7cada](https://github.com/angular/protractor/commit/4b7cada1317079c20ddf1bb105303e21adba6e32))
  fix(sauce): bring back sauceProxy as a configuration option (#4419)

- ([b87159b](https://github.com/angular/protractor/commit/b87159b3fcb379b85727a1beb6fd41a914235cf8))
  fix(website): fix all locator examples to use `element` over `browser.findElement` (#4413)

- ([768fd39](https://github.com/angular/protractor/commit/768fd393d1084a8da0ec6eeaa57508bf17519a3f))
  fix(local): allow local driver provider to use gecko driver from config (#4412)

- ([c0b8770](https://github.com/angular/protractor/commit/c0b8770ff1a508205b5cf38b5611918e20028fe3))
  docs(website): fix issue 4246

- ([f79938e](https://github.com/angular/protractor/commit/f79938e3d138c7bedc66f8c6748704402ea721c4))
  docs(plugins): add ng-apimock plugin to plugins.md

- ([ab1afb0](https://github.com/angular/protractor/commit/ab1afb093107f3a63f6e15f8f315e33576bb414d))
  fix(blockingproxy): Start bpRunner strictly after setupDriverEnv

- ([b85e7ee](https://github.com/angular/protractor/commit/b85e7ee1c53cdc4cfb23dc3d06d40317a27e50e7))
  fix(npmignore): .map files in built directory cause stacktrace lines to nowhere Fixes #4371

- ([299fc8d](https://github.com/angular/protractor/commit/299fc8d96b3e5daf632a1c584728214ababcebf8))
  docs(browser-support): Fixed incorrect example

- ([e5a5d59](https://github.com/angular/protractor/commit/e5a5d59fcabe15860b30944e714bbd8e81ceaeae))
  docs(frameworks) align cucumberOpts comments

- ([fe8c480](https://github.com/angular/protractor/commit/fe8c480bd860209cc68768de884d050cbf1a5b27))
  docs(frameworks) update cucumber dry run option

- ([2e9acf5](https://github.com/angular/protractor/commit/2e9acf58b76b553c558f56b6a38c161ad50324de))
  docs(plugins) add protractor-numerator plugin to plugins.md

- ([3f861ae](https://github.com/angular/protractor/commit/3f861ae069df98a06cfa1ede89f56a8d0ec9d5d2))
  By.js locator should accept functions

## Dependencies

- ([0fbc2c0](https://github.com/angular/protractor/commit/0fbc2c0ac12992bd61712188a96aef6684bef0c1))
  chore(release): update selenium-webdriverjs


# 5.1.2

## Features

- ([dd2ccbb](https://github.com/angular/protractor/commit/dd2ccbb1b73b7c90647837cd1c4f6b16b3f6b0ac))
  feat(saucelabs): Add Sauce Labs protocol customization support

## Fixes

- ([1a47076](https://github.com/angular/protractor/commit/1a47076875395648038a39fcd258a77bfcabe05c))
  fix(ci): Use latest pip on CircleCI

- ([fd59c78](https://github.com/angular/protractor/commit/fd59c78407ced4f17e1b4ed4451ce463439aa3c9))
  fix(elementexplorer): Set script breakpoints with cross-platform safe paths.

  Fixes #4011

- ([1250278](https://github.com/angular/protractor/commit/12502784b306cbedca8684486c31eeb361da5897))
  fix(cli): Correctly parse list chromeOptions

  Chromedriver requires that certain options always be passed as an array. Optimist passes
  --single-option as a string instead of an array which is invalid. This ensures that we always pass
  an array, even if a single option is passed via the cli.

  Fixes #4050

- ([183cd80](https://github.com/angular/protractor/commit/183cd803254f7a3ccb3a8650e8ef06b4fff03446))
  fix(browser): Fix browser.angularAppRoot()

  By default, it wasn't returning anything. Now it returns a promise that resolves to
  internalAngularAppRoot. Fixes #4233

- ([bd534fb](https://github.com/angular/protractor/commit/bd534fb8b2dfaca9072914dc84ad662891a8c7b2))
  fix: Add "stackTrace" option to allowedNames in cli.ts

  This fixes a problem I encountered similar to #4196 - where `stackTrace` is listed as an option
  but an error is given saying it's an "unknown extra flag"

- ([8249167](https://github.com/angular/protractor/commit/82491678de71b43311ea68d496ff807e1c72ee5e))
  fix: export Runner, not just its type. (#4227)

- ([0eb5b76](https://github.com/angular/protractor/commit/0eb5b7608e4bfb770878fe443d97ed9aa426c070))
  fix(navigation): ignore unknown JS errors in IE (#4149)

  The `err` object doesn't have the `code` property any more (Selenium Server Standalone 3.3.1 +
  IEDriver win32 3.3.0), so we need a new way to detect those errors. See #841
- ([4752ad1](https://github.com/angular/protractor/commit/4752ad1287af536c6dd442dd8c74546f978627d9))
  chore(examples): Fix TSC issues with exampleTypescript (#4132)


## Dependencies

- ([a0a1fac](https://github.com/angular/protractor/commit/a0a1fac8568f2bfbd6d5721db438aed390e30d23))
  chore(deps): Updating webdriver-manager and jasminewd2


# 5.1.1

## Features

- ([3edd62e](https://github.com/angular/protractor/commit/3edd62eccccb67ec7cb71b8c3d8b2c2921a6f7ca))
  feat(saucelabs): Add Sauce Labs HTTPS Support (#4071)

- ([29f975a](https://github.com/angular/protractor/commit/29f975a34f5885a21525c3746bd3e82d5ae0c51e))
  feat(plugins): allow plugins to know which browser instance to run against (#4066)

  Closes https://github.com/angular/protractor/issues/4054

## Dependencies

- ([9d69a81](https://github.com/angular/protractor/commit/9d69a819c96e408df2b59589d49811a89af1bc74))
  deps(typescript): use typescript@~2.0.0 (#4062)

  - move noCF tests to install and fix reference to protractor
  - changed element.ts to not use keyof
  - remove gulp task tsc:spec

# 5.1.0

#### Blocking proxy

Blocking Proxy is a new experimental feature in Protractor 5 and is behind the
`--useBlockingProxy` or `blockingProxyUrl`. See the
[lib/config.ts#L100](https://github.com/angular/protractor/blob/master/lib/config.ts#L100).
Other ways to start blocking proxy include using the
`--highlightDelay` and `--webDriverLogDir` flags See [lib/config.ts#L501](https://github.com/angular/protractor/blob/master/lib/config.ts#L501).

This adds two options, both of which are implemented with Blocking
Proxy. `--webDriverLogDir` will create a readable log with timing
information of webdriver commands in the specified directory.

`--highlightDelay` will pause before clicking on elements or sending keys.
While paused, the element that's about to be affected will be
highlighted.

#### Webdriver-manager

Webdriver-manager will now by default grab the latest versions of all binaries
(standalone, chromedriver, iedriver, gecko driver). Use the
`--versions.(binary name)` to pin to a specific version. Selenium standalone
3.0.1 has a bug which prevents it from working with any version of FireFox.
We have tested version 3.0.0-beta4 and know that it works with
FireFox 51, and we expect that the 3.0.2 release will also work.

#### TypeScript support

For jasmine users, in order to get all the type declarations that are used in
jasminewd2, you'll need to install `@types/jasminewd2` in addition to
`@types/jasmine` as dev dependencies.

## Features

- ([0cd156d](https://github.com/angular/protractor/commit/0cd156d6829f23f93403d865b7fdb7eab4f45446))
  feat(debugging): Add webdriver logging and highlight delay. (#4039)

  This adds two options, both of which are implemented with Blocking
  Proxy. --webDriverLogDir will create a readable log with timing
  information of webdriver commands in the specified directory.

  --highlightDelay will pause before clicking on elements or sending keys.
  While paused, the element that's about to be affected will be
  highlighted.

- ([3d98a16](https://github.com/angular/protractor/commit/3d98a1668138d36681bf305c9ea67dd1eea38899))
  feat(config): Support setting `SELENIUM_PROMISE_MANAGER` flag via the config (#4023)

  Closes https://github.com/angular/protractor/issues/3691
- ([4e40fb1](https://github.com/angular/protractor/commit/4e40fb175e64820bbab24efb376dac80fa6ba2b0))
  feat(browser): chain promises in `browser.get` (#4017)

  Closes https://github.com/angular/protractor/issues/3904
- ([33393ca](https://github.com/angular/protractor/commit/33393cad633e6cb5ce64b3fc8fa5e8a9cae64edd))
  feat(browser): chain some promises in `lib/browser.ts` + return promise from
  `waitForAngularEnabled` (#4021)

  Minor breaking change since `waitForAngularEnabled` no longer returns a boolean
   Part of angular#3904
   Chaining `browser.get` has proved surprisingly complex, so I'll do that in a different PR
   Also fixed a minor bug in `lib/clientsidescripts.js` while debuging
- ([7cb9739](https://github.com/angular/protractor/commit/7cb9739954bc26f0667d671cdb0083f5bd43f2f6))
  feat(browser.ready): make `browser.ready` wait for all async setup work (#4015)

  Closes https://github.com/angular/protractor/issues/3900
- ([b77cb92](https://github.com/angular/protractor/commit/b77cb928301fbe4f77ffcdcace424a490581416e))
  feat(restart): `browser.restart` should return a promise (#4008)

  Also allows `browser.restart` to work when the control flow is disabled, and
  fixes it for forked browsers.

  Closes #3899 and #3896
  https://github.com/angular/protractor/issues/3896

- ([4a59412](https://github.com/angular/protractor/commit/4a59412357eb5df592b06dd282d88d6dbc5e4771))
  feat(angularAppRoot): Replace rootEl with browser.angularAppRoot() (#3996)

  Replace browser.rootEl with browser.angularAppRoot(), which changes the root element in a promise
  on the control flow. Note that browser.rootEl will immediately return the current value, but
  browser.angularAppRoot() will return a promise that resolves during the next step in the control
  flow.

  Also update to BlockingProxy 0.0.3, which allows changing rootSelector.

- ([879aac6](https://github.com/angular/protractor/commit/879aac6ee6c1c36d005b538472e2754b987b3368))
  chore(blockingproxy): Allow using a pre-existing Blocking Proxy instance (#3970)

- ([bf123ad](https://github.com/angular/protractor/commit/bf123adafc442440b2ca10725113b47342ebb24f))
  feat(elements): Add isPresent() to ElementArrayFinder. (#3974)

## Bug Fixes

- ([f9bee84](https://github.com/angular/protractor/commit/f9bee84bc03b6cd6872522b8780327423b789e19)) fix(restart): preserve waitForAngularEnabled on restart and add promise chaining

  I noticed I missed `waitForAngularEnabled` in #4037.  This commit fixed that.

  While I was at it I fixed a minor error where the promises implicitly created by
  setting `rootEl` and `ignoreSynchronization` weren't getting chained properly.

  Also fixed minor (so minor I think it was impossible to trigger) where
  browser.plugins_ could be undefined.

- ([0b0c224](https://github.com/angular/protractor/commit/0b0c224e4056368c2c0030064b4ca4235163276b))
  fix(plugins): do not force ManagedPromise in plugins.ts (#4036)

- ([9c2274d](https://github.com/angular/protractor/commit/9c2274d8f218cabc946dbc6a11d725458c1b4e3a))
  fix(restart): preserve properties like `browser.baseUrl` upon restart (#4037)

  I also fixed a minor issue where `internalRootEl` wasn't being set when blocking proxy was being
  used.  I also just cleaned up our internal uses of `this.rootEl`.

  Closes #4032

- ([a20c7a7](https://github.com/angular/protractor/commit/a20c7a7cc1df04f96cb1a9dd971df39883ac173b))
  fix(element chaining): make element chaining work when the control flow is disabled (#4029)

  Also added some tests to `spec/ts/noCF/smoke_spec.ts` double checking that the control flow is off

- ([7481dee](https://github.com/angular/protractor/commit/7481dee75cab1da9d207909e928eee55a9f5a682))
  fix(cli): Make unknown flag check a warning instead of an error. (#4028)

- ([40bbeca](https://github.com/angular/protractor/commit/40bbeca003017901760e10831c66d383cf5accf8))
  fix(expectedConditions): Add tests and fix race conditions around visibility (#4006)

  Add test cases to reproduce the missing element race conditions possible in
  expected condition methods `visibilityOf`, `textToBePresentInElement`,
  `textToBePresentInValue` and `elementToBeClickable`.

  Add error handler `falseIfMissing` to all expected conditions that depend
  on the presence of an element.

  Expected conditions check the presence of an element before other checks,
  but when an element is removed exactly in the moment after the `isPresent`
  and before `isDisplayed` in `visibilityOf` the condition used to fail.

  This solution does not handle missing elements in (`isEnable`, `isDisplayed`,
  `isSelected`) and focused only on expected conditions (see #3972)

  This problem was also referenced in #3578 and #3777

- ([5856037](https://github.com/angular/protractor/commit/5856037368ee8d8a21f11eadbfe93d5f46507f60))
  fix(cli): Allow frameworks to specify flags they recognize. (#3994)

  Fix for #3978.
   Our initial plan to allow setting --disableChecks with an environment variable is insufficient,
  since the custom framework isn't even require()'d until after the config is parsed. This moves the
  unknown flag check into the runner, and gives frameworks a way to specify extra flags they accept.
- ([e68dcf1](https://github.com/angular/protractor/commit/e68dcf1bfd7f32c59ebd23fa16ca53e1a53f8ddf))
  fix(driverProviders): Check config in the right place. (#3991)

- ([eb89920](https://github.com/angular/protractor/commit/eb899208457f83853f043edea5e56b07e87803bc))
  fix(driverProviders): Handle promise rejection when starting selenium (#3989)

  Fixes #3986. Also error if jvmArgs isn't an array.

- ([8d2fc07](https://github.com/angular/protractor/commit/8d2fc07ed28a1b19c03a9869442f76f2963e40a1))
    chore(browser): deprecate `browser.getLocationAbsUrl()`. (#3969)

    Closes #3185
- ([15a1872](https://github.com/angular/protractor/commit/15a187204bb8b87255d5f4622094eabc71206315))
  fix(firefox): Fix directConnect for Firefox 51+ (#3953)

- ([81f56a4](https://github.com/angular/protractor/commit/81f56a449f8988feba21617ef7533cfa2f06c6f8))
  fix(cli): display disableChecks option in extra flags error message (#3964)

- ([6a4dc7a](https://github.com/angular/protractor/commit/6a4dc7a6a5b796e0215e5b9abf99494ac13cb647))
  fix: no longer use es6 let statement (#3963)

  * Currently in Protractor v5 the Angular detection script uses ES6 features like the `let` modifier.

  This can break Protractor on browsers, which doesn't support those statements.
  > See https://saucelabs.com/beta/tests/275f75091dac40a0a3374d29d912caee/commands#11

- ([528338c](https://github.com/angular/protractor/commit/528338c6722219fdcfc51153b0031a02f0fce046))
  fix(expectedCondition): fix NoSuchElementError in visibilityOf due to a race condition (#3777)

  Handle NoSuchElementError in the expected condition visibilityOf, which occurred when
  an element disappears between the isPresent() and isDisplayed() check.

## Dependencies

- ([5899b67](https://github.com/angular/protractor/commit/5899b676bc2db0005506ae2306350e6ffea3c808))
  deps(update): update webdriver-manager to ^12.0.1 (#4042)

  Running `webdriver-manager update` will now by default grab the latest
  versions of all binaries (standalone, chromedriver, iedriver, gecko
  driver). You can continue to pin to a specific versions using the
  command line option. Example `webdriver-manager update --versions.chrome 2.20`.
  As of this release the latest versions are:

  - gecko v0.14.0
  - selenium-standalone 3.0.1 is the latest jar file; however, we recommend 3.0.0-beta4. See note
  below on Firefox support.
  - chromedriver 2.27
  - iedriver 3.0.0

   A note on FireFox support: Selenium standalone 3.0.1 has a bug which prevents it from working
  with any version of FireFox. We have tested version 3.0.0-beta4 and know that it works with
  FireFox 51, and we expect that the 3.0.2 release will also work.

   closes #4033

- ([cd084a0](https://github.com/angular/protractor/commit/cd084a0ca29cd73aa3ce1650188adf7ddfdb7962))
  deps(jasmine): update jasmine to ^2.5.3 (#3960)

# 5.0.0

This version includes big changes around upgrading to selenium-webdriver 3.0.x.
See the [selenium-webdriver changelog](https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/CHANGES.md).

For the 5.0.0 release, we are still using the selenium standalone server 2.53.1
and recommend using Firefox 47. Firefox 48+ currently is not supported.

## Breaking Changes

- Minimum node version is now 6.9.x.
- When testing with Firefox 47, use the capability option `marionette: false`
  to use the legacy Firefox driver.

  Before:
  ```
  capabilities: {
    browserName: 'firefox'
  }
  ```

  After:
  ```
  capabilities: {
    browserName: 'firefox',
    marionette: false
  }
  ```

- We moved `@types/jasmine` to a devDependency. This means that Jasmine
  TypeScript users will need to include the `@types/jasmine` as a project
  dependency. This is to avoid conflicts for users that prefer mocha typings.

  After:
  ```
  "dependencies": {
    "@types/jasmine": "^2.5.38"
  }
  ```

- Selenium-webdriver methods removed: `WebDriver.prototype.isElementPresent`,
  `WebElement.prototype.getRawId`, `WebElement.prototype.getInnerHtml`, and
  `WebElement.prototype.getOuterHtml`.

  Before:
  ```
  let isPresent = browser.driver.isElementPresent(By.tagName('a'));
  let i = element(locator).getInnerHtml();
  let o = element(locator).getOuterHtml();
  ```

  After:
  ```
  let isPresent = element(By.tagName('a')).isPresent();
  let i = browser.executeScript("return arguments[0].innerHTML;", element(locator));
  let o = browser.executeScript("return arguments[0].outerHTML;", element(locator));
  ```

- Selenium-webdriver `ErrorCodes` have been removed.
- Adding cookies have been changed:

  Before:
  ```
  browser.manage().addCookie('testcookie', 'Jane-1234');
  ```

  After:
  ```
  browser.manage().addCookie({name:'testcookie', value: 'Jane-1234'});
  ```
- Removed `protractor.wrapDriver()`.
- You can no longer use `repl` command from within `browser.pause()`. Instead,
  use `browser.explore()` to directly enter the `repl`.
- Sending flags that are not recognized by the CLI throws an error. Since flags
  are a subset of all configuration options, these errors can be silenced with
  `--disableChecks`.
- Auto-detection of the root element. This is a breaking change because it
  changes the default root element behavior and removes the
  `config.useAllAngular2AppRoots` flag.  Modern angular apps now
  default to using all app hooks, and ng1 apps now check several places, notably
  the element the app bootstraps to.
- `sauceProxy` configuration field has been removed. Use `webDriverProxy`
  instead.

  Before:
  ```
  sauceProxy: 'http://sauceProxy'
  ```

  After:
  ```
  webDriverProxy: 'http://sauceProxy'
  ```

## Features

- ([ec93c4a](https://github.com/angular/protractor/commit/ec93c4ab882991410ad9d3f52d87c0f5ec947641))
  chore(cli): **breaking change** throw errors on unknown flags (#3921)

  Unknown flags are options sent that is unrecognized by the CLI. For users that
  encounter this error but would like to silence it, use: `--disableChecks`.

  closes #3216
- ([bc58332](https://github.com/angular/protractor/commit/bc583321a233453fc2b89472013b2ec3e1d6b6f9))
  feat(rootEl): ***breaking change*** auto-detect the root element better (#3928)

  This is a breaking change because it changes the default root element behavior
 and removes the `config.useAllAngular2AppRoots` flag.  Modern angular apps now
 default to using all app hooks, and ng1 apps now check several places, notably
 the element the app bootstraps to.

  closes #1742
- ([604fdbf](https://github.com/angular/protractor/commit/604fdbf064cc2785a2e745747beeaeb45d27f8ed))
  cleanup(config): **breaking change** Remove redundant sauceProxy config (#3868)

  Removes the `sauceProxy` config field, and uses `webDriverProxy` when creating
  the SauceLabs client.
- ([9465b9f](https://github.com/angular/protractor/commit/9465b9f1e667c9590e05d9ddac16fe5143aa93af))
  feat(mobile): add extended wd commands for appium (#3860)

  Also had to make some minor changes to the website to handle longer inheritance
 chains
   Closes https://github.com/angular/protractor/issues/1940
- ([0e26b21](https://github.com/angular/protractor/commit/0e26b218d5f385dd9871a40553acc174cfdfe26d))
  feat(blockingproxy): Add synchronization with BlockingProxy. (#3813)

  This adds support for BlockingProxy behind the flag --useBlockingProxy.

  If set, the driver providers will start a proxy during their setup phase,
  passing the selenium address to the proxy and starting a webdriver client
  that talks to the proxy.

  Starting a proxy for each driver provider isn't strictly necessary. However,
  when we run with multiple capabilities it's easier to handle the logging if
  each Protractor instance has it's own proxy.

  Known issues:

  - Doesn't work with directConnect. You can get the address of chromedriver by
  mucking around in Selenium internals, but this probably changed for Selenium
  3.0 and I doubt it's worth figuring out until we upgrade.
  - Doesn't yet work with webDriverProxy (but it's an easy fix)

- ([ca4f1ac](https://github.com/angular/protractor/commit/ca4f1acda3672942307d0f102d586c8889dd3d68))
  chore(driverProviders): add warnings to extra driver provider parameters (#3873)

  - builds the driver provider in lib/driverProviders/index instead of lib/runner
   closes #1945

- ([681b54a](https://github.com/angular/protractor/commit/681b54a21ee1467d5a95c3693cde148759767d62))
  refactor(browser): Remove protractor.wrapDriver() **breaking change** (#3827)

  Before:

  Users could create their own selenium driver instance and enable Protractor on
  it like so:

  ```js
  let capabilities = webdriver.Capabilities.chrome();
  let driver = new webdriver.Builder().usingServer(seleniumAddress)
    .withCapabilities(capabilities).build();
  let browser = protractor.wrapDriver(driver);
  ```

  Over the years, wrapDriver() has become increasingly broken as Protractor
  needs extra configuration options that wrapDriver() doesn't set.

  After:

  This method is removed. If users need a new browser instance, they can
  use `browser.forkNewDriverInstance()`.

- ([86fd569](https://github.com/angular/protractor/commit/86fd56917f039efbff8e6f323f4d91fa8bc821a4))
  feat(ngUpgrade): Auto detect ngUpgrade apps and make the ng12Hybrid flag
  unnecessary for most users (#3847)


## Bug fixes

- ([de153e7](https://github.com/angular/protractor/commit/de153e769292f6b9a99b2d5152bd2929ab1c48af))
  fix(launcher): running getMultiCapabilities should reject on errors (#3876)

  closes #3875
- ([1345137](https://github.com/angular/protractor/commit/1345137dc5173e868de4b9da6ed16b7928e4c50e))
  fix(isElementPresent): for un-wrapped `WebElement`s, `browser.isElementPresent`
  was broken (#3871)

  Closes #3864
- ([4af3b2e](https://github.com/angular/protractor/commit/4af3b2e30e925ea9d8e47537ea0a7fe8f04b579d))
  fix(element): Fix typing of ElementFinder.then (#3835)

  Type `then` as optional on ElementFinder.


## Dependencies
- ([4d87c9c](https://github.com/angular/protractor/commit/4d87c9c20d6905189c0e7ea7214cf3e87c8efe91))
  deps(update): update tslint and @types/selenium-webdriver (#3941)

  - use @types/selenium-webdriver ~2.53.39
  - fix for tslint

  closes #3939
- ([7376708](https://github.com/angular/protractor/commit/7376708c723976ef8a0a3ad7c245606bef1221db))
  deps(tslint): set tslint to ~4.2 (#3938)
- ([cb38ed0](https://github.com/angular/protractor/commit/cb38ed0a8aae2cb862001e0b6f076aa9972f4489))
  Refactor element explorer to work with selenium-webdriver 3 (#3828)

  This implementation now relies mostly on promises explicitly, so the control
  flow is only used to add one large task to the queue. This should pave the way
  for the eventual removal of the control flow, as well as getting element
  explorer to work immediately.

  BREAKING CHANGE

  You can no longer use the `repl` command from within `browser.pause()`. Instead,
 use `browser.explore()` to directly enter the repl.
- ([8196059](https://github.com/angular/protractor/commit/819605933d2dfef70b4332a727b3b3830e306817))
  chore(dependency): switch to webdriver-manager 11.1.0 and remove
  `--versions.chrome 2.26` from circle.yml (#3865)
- ([397bf65](https://github.com/angular/protractor/commit/397bf65e088b640cf3612f9da678180f49939b84))
  deps(update): move @types/jasmine to devDependencies (#3795)

  - update outdated dependencies
  - move @types/jasmine to devDependencies
   closes #3792
- ([a3e8b43](https://github.com/angular/protractor/commit/a3e8b4319d3e8b049e55e5c3c64a7fdb5a132ddf))
  deps(selenium-webdriver): upgrade to selenium 3 (#3781)

  Please see the [selenium-webdriver changelog](https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/CHANGES.md)

    - Removed method `WebDriver.prototype.isElementPresent`
    - Removed method `WebElement.prototype.getRawId`
    - Removed `getInnerHtml` and `getOutterHtml`

    - Dependency required for upgrade: use `jasminewd2@0.1.0`.
    - Selenium-webdriver requires node version 6+, updating travis and circle yml
      to use node 6 and 7.

    - Use `instanceof` selenium-webdriver error instead of error code.
      Selenium-webdriver error codes have been deprecated.

    - Use executor with selenium-webdriver from `lib/http`. Deferred executor has
      been deprecated.
    - Fix quitting `driverProviders`. When calling `webdriver.quit`, the control
      flow is shutdown and will throw an error.
    - Driver provider for direct connect has been modified to use `ServiceBuilder`
      and to call the `Service` to `createSession`
    - Note: Since this upgrade is still using FF 47, direct connect for Firefox is
      required to pass "marionette: false" in the capabilities. If you do not pass
      marionette to false, it will look for gecko driver in the PATH.
    - Added a TODO to support FF after 48+ with direct connect and gecko driver.

    - Updated `browser.manage().addCookie('testcookie', 'Jane-1234');` to use
      `browser.manage().addCookie({name:'testcookie', value: 'Jane-1234'});`

    - Updated debug commons for breakpoint updated to selenium-webdriver
      `lib/http` line 432.

    - For mocha tests, `selenium-webdriver/testing` uses the global `it` and
      cannot be reassigned as Protractor's global `it`. Some code has been
      copied / modified to `lib/frameworks/mocha` to make this work.

    - Capabilities for Firefox 47 requires setting marionette to false.
    - Setup still requires selenium standalone server 2.53.1 for Firefox tests.
      Firefox version used is 47.
    - Using selenium standalone server 3, with Firefox 48+ tests fail with gecko
      driver still do not work.
    - Selenium standalone 3 + FF 49 + gecko driver 0.11.1 does not work
    - Selenium standalone 3 + FF 48 + gecko driver 0.11.1 appears to work for a
      single test but after it quits, selenium standalone no longer works with
      firefox. When firefox 48 exists, logs show the following:

      ```
      20:01:14.814 INFO - Executing: [delete session: e353fa1b-e266-4ec3-afb3-88f11a82473a])
      [GFX1-]: Receive IPC close with reason=AbnormalShutdown
      [Child 30665] ###!!! ABORT: Aborting on channel error.: file /builds/slave/m-rel-m64-00000000000000000000/build/src/ipc/glue/MessageChannel.cpp, line 2052
      [Child 30665] ###!!! ABORT: Aborting on channel error.: file /builds/slave/m-rel-m64-00000000000000000000/build/src/ipc/glue/MessageChannel.cpp, line 2052
      ```
- ([eb31c9c](https://github.com/angular/protractor/commit/eb31c9c7755399bcd01630158d900e0b940e9c31))
  deps(types): update @types/selenium-webdriver dependency (#3886)

  Fixes issue #3879 and adds the protractor.Key.chord method

# 4.0.14

## Bug Fixes

- ([83694f5](https://github.com/angular/protractor/commit/83694f5e66592c5e229db98af3733ff73dac8392))
  fix(types): update for selenium-webdriver types creating transpile errors (#3848)

  - pin package.json to a specific version of @types/selenium-webdriver

- ([ea09be4](https://github.com/angular/protractor/commit/ea09be4ff0750d1d0873677fac9055a9acb630b3))
  fix(jasmine): Return the full test name in Jasmine test results. (#3842)

  Fixes #3510

- ([76cb4b4](https://github.com/angular/protractor/commit/76cb4b4c2ac892f9785dc1506cbc0b490eea91fe))
  fix(element): Fix typing of then function (#3785)

- ([5a12d69](https://github.com/angular/protractor/commit/5a12d69f34fd80234455bbe6457e125a27a07e54))
  fix(config): cucumberOpts.require should be an optional Array of strings (#3817)

  - Both cucumber options require and format now support `string` or `string[]` see #3822 #3817
  - Remove no longer available options and fix `dryRun` type
  - Update comment for `dryRun`

## Features

- ([b337a8e](https://github.com/angular/protractor/commit/b337a8e8547af0b90663a35b07fd30b55ff61dd0))
  feat(config): add seleniumServerStartTimeout (#3791)

## Dependencies

- ([688f5d6](https://github.com/angular/protractor/commit/688f5d6a089275ac99688196cd66f345c64adfec))
  deps(update): update vrsource-tslint-rules and webdriver-manager (#3856)

- ([c437fd3](https://github.com/angular/protractor/commit/c437fd3315278e7536a8385a9769e4fbd954d0a6))
  deps(selenium-webdriver): clean up types selenium-webdriver (#3854)


# 4.0.13

## Bug Fix

- ([c3978ec](https://github.com/angular/protractor/commit/c3978ec166760ac07db01e700c4aaaa19d9b5c38))
  fix(revert): element(locator).then should not appear in the docs and change reverted. (#3808)

  - change comments to not be in JSDoc format
  - reverts change `element(locator).then`

# 4.0.12

## Bug Fixes

- ([742f264](https://github.com/angular/protractor/commit/742f26465ca926c39bf28f03390a45030c15acf3))
  fix(driverProviders): quit forked instances w/ local driver provider (#3787)

  - fix driver provider quit session to not throw error and quit
  - should fix sauce labs test, enabling expected conditions test with forked instance
  - checked that chromedriver does not persist in the background
  - add local driver test with forked instance to test suite
  - organize attach session and local specs to driverProviders directory
   closes #3780, closes #3779, closes #3772
- ([7d481d6](https://github.com/angular/protractor/commit/7d481d6886b39cb476b889de5d14186bda6dc066))
  fix(ExpectedConditions): non-static ExpectedConditions for browser (#3766)

  - Update sauce lab binary to run on travis.
  - Disable expected conditions test that forks the browser. This issue appears to
   not be specific to sauce labs. Also can reproduce this with a local driver
   provider. Additional work is required around driver providers and the runner.
  - Add TODO to enable test in the future when this is resolved.
   closes #3761

# 4.0.11

## Features

- ([6ebee72](https://github.com/angular/protractor/commit/6ebee72088016085e93d268effabcbe0b3d0a70f))
  feat(config): Add 'random' and 'seed' jasmine config options (#3467)

## Bug Fixes

- ([2048182](https://github.com/angular/protractor/commit/2048182206e88dd4cde0e92cfac3ed97cbe38f15))
  docs(timeout): Update timeout error message and docs (#3723)

- ([f3938f9](https://github.com/angular/protractor/commit/f3938f9fcd1b91272f2f11d4d39e458576fb75b0))
  fix(jvmArgs): fixes jvmArgs launching selenium from config (#3698)

  closes #3697

- ([21d534f](https://github.com/angular/protractor/commit/21d534fad28f84e8cef166348119387e49661227))
  fix(types): Make element.then()'s signature more broad. (#3719)

- ([e9061b3](https://github.com/angular/protractor/commit/e9061b30c3673344d776187682d1c735aaad69f7))
  chore(types): make plugins.ts more strongly-typed (#3685)

- ([f42e0b3](https://github.com/angular/protractor/commit/f42e0b3dc824404ac0c86364bf5de4b657cf30ea))
  fix(globals): Resolve exported globals dynamically. (#3716)

  fixes #3677

- ([d7fa744](https://github.com/angular/protractor/commit/d7fa74464709c532d451fdead78bc57b21956784))
  fix(util): Fix adding stack traces to Errors thrown as strings (#3687)

## Dependencies

- ([a1c8a23](https://github.com/angular/protractor/commit/a1c8a23fea3542eabeae6e7bc59f3c2ffa0fda94))
  chore(deps): Downgrade jasmine to 2.4.1 (#3715)

  Upgrading to 2.5.2 causes #3606. We'll need to wait on a fix for jasmine/jasmine-npm#95 before
  upgrading.

# 4.0.10

## Features

- ([7083426](https://github.com/angular/protractor/commit/70834269ac375f2be5a6cadf8ec9169cf19abff6))
  feat(hybrid): set ng12hybrid flag in the config (#3452)

## Bug Fixes

- ([b67d8eb](https://github.com/angular/protractor/commit/b67d8eb4101ee80c53476d1640865ca612793436))
  fix(restart): typescript fix for browser.restart (#3658)

  closes #3648

- ([6626ce7](https://github.com/angular/protractor/commit/6626ce7690e1120c3b246eff7793a26cb038b091))
  fix(launcher) Ignore uncaught exceptions from webdriver. (#3608)


- ([5cef1bf](https://github.com/angular/protractor/commit/5cef1bf20f88a2c3bb8944afbc6a328fc273aedd))
  Explicitly remove newlines from getText() (#3618)

  MSEdge does not properly remove newlines, which causes false negatives when using
  `textToBePresentInElement()`

## Dependencies

- ([c11945a](https://github.com/angular/protractor/commit/c11945a1b67bdc774b267f101887dc3f575ad00b))
  deps(outdated): webdriver-manager and @types updated

  - webdriver-manager 10.2.6 uses the latest chromedriver, version 2.25

# 4.0.9

This version includes a breaking change to the TypeScript import statement.
Please see the feature below.

## Features

- ([5034c89](https://github.com/angular/protractor/commit/5034c89242794dd14aba294ba3468937e06a7b69))
  feat(typescript): move typescript variable instances from protractor/… (#3565)

  Breaking change for TypeScript:
  Instead of importing globals like `browser` from `protractor/globals`,
  import from `protractor`.

  Before:

   ```ts
   import {browser, element} from 'protractor/globals';
   import {ElementFinder} from 'protractor';

   describe('my app', () => {
     myElement: ElementFinder;

     beforeEach(() => {
       browser.get('example.com');
       myElement = element(by.css('foo'));
     });
   });
   ```

   After

   ```ts
   import {browser, element, ElementFinder} from 'protractor';

   describe('my app', () => {
     myElement: ElementFinder;

     beforeEach(() => {
       browser.get('example.com');
       myElement = element(by.css('foo'));
     });
   });
   ```

   Closes #3564

# 4.0.8

## Bug Fixes

- ([58459a9](https://github.com/angular/protractor/commit/58459a94b9e7a54f4b48614b93c0614177a8a522))
  fix(types): do not publish built/globals.d.ts (#3546)

  - do not publish built/globals.d.ts
  - remove type interface for HttpProxyAgent and set to to any

# 4.0.7

## Dependencies

- ([a68dd3f](https://github.com/angular/protractor/commit/a68dd3f0c6e33f93a5b7e9674197154b0e68cedd))
  deps(jasmine): lower jasmine version down to 2.4.1 (#3540)

  - upgrading to 2.5.x no longer logs jasmine output

# 4.0.6

## Bug Fixes

- ([d18bba3](https://github.com/angular/protractor/commit/d18bba3e288610dd606aac4b656581da0dc65491))
  fix(types): remove relative path used for @types/node and @types/jasmine (#3535)


## Dependencies

  closes #3533
- ([4e7e8ec](https://github.com/angular/protractor/commit/4e7e8ec2c0a018e6159b557decee6b2df53958b5))
  deps(outdated): update types/q and jasmine (#3525)

## Other

- ([9d5edbe](https://github.com/angular/protractor/commit/9d5edbe315ea70aad1fd0a2eaeff3328a2f8ee93))
  chore(node): require the minimum node version 4.2.x required by selenium-webdriver (#3534)

# 4.0.5

In this version, there are several small changes that affect TypeScript users
from the previous version 4.0.4. Here are some of the steps to resolve any
transpiling errors:

- In your package.json, use TypeScript 2.0.0. This will allow Protractor to use
  the `@types/node` and `@types/jasmine` installed in node\_modules.
- Remove `jasmine` and `node` from your `typings.json` since these types are
  already included via `@types`. If these were the only ambient typings
  installed, remove the `typings.json` file.
- If you still have a `typings.json` file, remove `typings` directory and
  install a fresh set of ambient typings with: `typings install`.

## Features

- ([30102fb](https://github.com/angular/protractor/commit/30102fbdaa6354e8ba1a067c6731799aa0f0ff42))
  feat(util): Allow more verbose logging with multiple sessions (#2985). (#3499)

## Bug fixes

- ([c5cc75b](https://github.com/angular/protractor/commit/c5cc75b41bc1a860061a5da1c23b718d440815ed))
  fix(logger): Set the log level based on the config at startup. (#3523)

  Fixes #3522. Also fix the mocha spec to stop yelling at us about ES6 arrow functions.

- ([c7fff5e](https://github.com/angular/protractor/commit/c7fff5e9182c5a2a96b57f4f23889b5a5a13f44e))
  fix(jasmine): Pass control flow to Jasminewd (#3519)

  Fixes #3505 and #2790, which is caused by JasmineWd and Protractor using different controlflow
  instances

- ([64b4910](https://github.com/angular/protractor/commit/64b491034c0373755a2f34db5db1810b8d90187a))
  fix(debugger): Fix issues when calling pause() multiple times (#3501) (#3504)

- ([143c710](https://github.com/angular/protractor/commit/143c710b5612667c183eacc7e080b1e172d9f97e))
  chore(types): webdriver typings for elements and browser (#3513)

  - include node and jasmine dependency to built/index.d.ts
  - update example and spec/install to not need @types/jasmine and @types/node to install
  - add more selenium-webdriver to gulp task
  - added an interface in globals for Error to include a code and stack
  - improve webdriver typings to elements and browser

- ([8ca9833](https://github.com/angular/protractor/commit/8ca98339341434fcff500accd34acfe97b5840e1))
  fix(mocha): Wrap it.only with the selenium adapter. (#3512)

  Fixes #3045. Since mocha 2.4.1, we should be wrapping global.it.only.

- ([f23d027](https://github.com/angular/protractor/commit/f23d0277e8796fef4b4679043d52009149e22ce9))
  chore(types): webdriver typings for locators (#3507)

  - temporarily add typings for selenium-webdriver.d.ts
  - include selenium-webdriver dependency to built/index.d.ts
  - add webdriver typings to locators
  - update example and spec/install to not use typings.json
   - spec test updated to get the tsc test to pass
  - includes clang formatting fixes

- ([e0b151a](https://github.com/angular/protractor/commit/e0b151a8b4e40364d4b7ac369faf7c5702dcf0a0))
  fix(launcher): Handle uncaught exceptions that are strings. (#3506)

  Also clean up instances where we were throwing strings instead of Errors.

# 4.0.4

## Features

- ([c5faf08](https://github.com/angular/protractor/commit/c5faf084b1ad16bda731140d91644487984e4600))
  feat(browser): auto-unwrap ElementFinder into WebElement for selenium funtions (#3471)

- ([a379b33](https://github.com/angular/protractor/commit/a379b33a6a472ff1a2a1d2da935e11ecb11573d1))
  feat(plugins): support onPrepare in plugins (#3483)


## Dependencies

- ([d10bc99](https://github.com/angular/protractor/commit/d10bc99198fa1163356ff5937bd5cbed89d58f8b))
  deps(outdated): update types/q and saucelab


- ([4252000](https://github.com/angular/protractor/commit/4252000dd847399c5c05c561aaf71a5467f94846))
  deps(types): typescript and typings dependencies (#3485)

  - remove typings dependency, scripts, and gulp task
  - add @types dependencies
  - clean up globals.ts from npm publishing
  - add declaration flag for tsc globals gulp task
  - ignore globals.d.ts from tsconfig and .gitignore
   closes #3484

# 4.0.3

## Bug fixes

- ([5f690fe](https://github.com/angular/protractor/commit/5f690fe0d0526d5ed4cc482fb5915d28eedbe11e))
  fix(export): export selenium-webdriver (#3433)

  - rename to ProtractorBrowser to be able to export selenium-webdriver Browser as Browser
  - export all selenium-webdriver items and subfolders in ptor
  - update dependency tests for selenium
  - add tests when protractor is installed
 closes #209227
- ([27f7981](https://github.com/angular/protractor/commit/27f798117fc599ce369026ebbbf28b818bbbaac6))
  fix(config): fix interface for functions such as onPrepare (#3434)

  closes #3431

# 4.0.2

## Bug fixes

- ([767d552](https://github.com/angular/protractor/commit/767d552c4ba7972085406b8b9f40fc57da1d214f))
  fix(types): typescript global reference and type declaration fixes (#3424)

# 4.0.1

## Bug fixes

- ([ee8ec91](https://github.com/angular/protractor/commit/ee8ec9124477ed20702d6a09a51274864867da1a))
  fix(element): set variables to public in constructor (#3417)

  closes #3414
- ([7266902](https://github.com/angular/protractor/commit/72669029636e56911de59ec90f0d893e7406dc1d))
  fix(sauce): sauceAgent passed incorrectly to sauce node module (#3415)

  closes #3410
- ([828e80c](https://github.com/angular/protractor/commit/828e80c2f14f3d1a4ac9b1b3b0ae0c5cd322e118))
  fix(browserstack): mark test suite as failed/passed on BrowserStack (#3409)

  closes #3256
- ([71532f0](https://github.com/angular/protractor/commit/71532f055c720b533fbf9dab2b3100b657966da6))
  fix(hybrid): add flag specifying that an app is an ng1/ng2 hybrid (#3403)

  Needed for angular2 after rc2
- ([2a3a0dc](https://github.com/angular/protractor/commit/2a3a0dc80edccbb72e6b2ca8c487b1eaacf15a20))
  fix(exports): fix type exports and require('protractor') exports (#3404)

  * fix(package): set main to ptor instead of browser
  * fix(exports): fix type exports and require('protractor') exports
- ([b2eaa29](https://github.com/angular/protractor/commit/b2eaa290bbd1d069fdaf8f25eee5eb3da611b589))
  fix(types): output plugin typings (#3389)

  * output plugin typings
  * change ProtractorPlugin to an interface
  * doc clean up
   closes #3365
- ([d2145b1](https://github.com/angular/protractor/commit/d2145b129af3e220abf656731c2491cdf29030d1))
  fix(launcher): output uncaught exception error (#3390)

  * split out message and stack to hopefully provide more information to the error
   closes #3384
- ([d7cf42e](https://github.com/angular/protractor/commit/d7cf42e85f0a3c9288722ee47c15d08f8b8ab115))
  fix(protractor): export class definitions under the protractor namespace (#3393)

  closes #3377
- ([2e83dcd](https://github.com/angular/protractor/commit/2e83dcd95d11e1fd10f011ac2a058bb33a1607ff))
  fix(types): add webdriver.promise and webdriver.WebElement to namespace (#3392)

  * fix(types): add webdriver.promise and webdriver.WebElement to namespace
   closes #3391

  * fix(protractor): export class definitions under the protractor namespace
   closes #3377

- ([dcbc832](https://github.com/angular/protractor/commit/dcbc832b6abdbdeb408c1741198bb20b5b9042a2))
  fix(types): use protractor from global namespace (#3388)


- ([ee038f9](https://github.com/angular/protractor/commit/ee038f945844490e7e57c78a57ee2a049d5a823d))
  fix(error message): do not crash of thrown error has made `stack` readonly (#3372)

# 4.0.0
This version includes some big changes, so we've decided to make it version 4.0!

- webdriver-manager is now it's [own NPM](https://www.npmjs.com/package/webdriver-manager), so you
can use it in your own projects. Protractor depends on it, though, so you shouldn't need to change
anything. However, because it is a new dependency you'll need to rerun `webdriver-manager update`.

- Protractor has TypeScript typings! See the [example](https://github.com/angular/protractor/tree/master/exampleTypescript)
for details on how to use TypeScript in your tests.

## Breaking changes
- ([d932ad7](https://github.com/angular/protractor/commit/d932ad7e853c0bda5d45b478a5c0271d072b6794))
  chore(browser): rename protractor to browser and add a protractor namespace (#3214)

  * added wrapDriver method from the browser.ts and ExpectedConditions to the protractor namespace
  * imported selenium webdriver ActionSequence, Key, promise, Command, and CommandName to the
  protractor namespace

- Selenium Webdriver has deprecated getInnerHtml and getOuterHtml. You'll need to update your tests to
not use these methods.

- Protractor node module no longer has a config.json file. This is now handled in the webdriver-manager
node module and the files are also downloaded to the webdriver-manager/selenium folder.

## Bug fixes
- ([d6910c1](https://github.com/angular/protractor/commit/d6910c168550da590b3d4db42f5c853e81cf83b6))
  fix(edge): Use resetUrl about:blank for MicrosoftEdge (#3267)

- ([f205518](https://github.com/angular/protractor/commit/f2055181e60fd358c1764fe716af3d64fc64810b))
  fix(launcher): resolve promise for getMultiCapabilities (#3195)

  closes #3191

- ([f149bd1](https://github.com/angular/protractor/commit/f149bd1e91e749a77e8ee147fdb3881584ae6851))
  fix(docs): Change extension for docs links to .ts (#3187)

  closes #3170

- ([67474e0](https://github.com/angular/protractor/commit/67474e05e73d3facead7c60150c18a2d866185c7))
  chore(configParser): allow non-glob file pattern (#2754)

  Cucumber allows line numbers to be passed in the filename in the form of
  `features/some.feature:42`. Glob expanding that results in an empty array and nothing being passed
  to the framework runner. This change checks for glob magic characters and only tries expanding it
  if found. Otherwise it just passes the filename verbatim. This was previously handled in [#2445]
  by stripping the line number first, but this is a more generic (non-cucumber) way to do it.
   Glob needed to be upgraded for this which resulted in a weird [npm 3 bug]
  (https://github.com/npm/npm/issues/10637). Removing the rimraf package resolved this. It was only
  used to generate documentation which itself was removed a while ago.

- ([f311320](https://github.com/angular/protractor/commit/f311320a1aed09b07d926d0c2aa586202f591b5b))
  fix(website): edit getText JSDoc for shortDescription (#3310)

  closes #3233
- ([ba63a92](https://github.com/angular/protractor/commit/ba63a92de021193c90794c54fefae39d806fba4a))
  fix(util): check stack exists before filtering the stack trace (#3309)

  closes #3224

- ([c86acd4](https://github.com/angular/protractor/commit/c86acd44bca821491558506964fe1ba8ed5b702a))
  chore(website): fix website for items to appear properly (#3314)

  - Fix order for website (see #3163. Does not include $ / $$)
  - Replace @return with @returns so descriptions will appear

- ([e9b49f2](https://github.com/angular/protractor/commit/e9b49f24f34730e0648d262be1c410a7f585703a))
  fix(config): do not flatten capabilities (#3291)

  This is no longer necessary in the latest version of selenium-webdriver. Without this change,
  `--capabilities.chromeOptions.binary` will do nothing, for example.
   Closes #3290

## Features
- ([78f3c64](https://github.com/angular/protractor/commit/78f3c64e6d466b44174417d4d6fbc382dbad34b1))
  chore(exitCodes): adding exit code for browser connect errors (#3133)

  * add exit code for browser connect errors
  * add exit code for browserstack error
  * add browser error for debug with multiple capabilities
  * use thrown stack traces for errors (instead of creating new ones) with captureStackTrace
  * allow for errors to suppress exit code for config parser thrown error

- ([85209f4](https://github.com/angular/protractor/commit/85209f42621b8992c777263458e9fc4772968777))
  feat(webdriver): extract webdriver-manager into a separate node module (#3068)

  closes #607, #2402

  * Removed the config.json. This will be managed now by webdriver-manager.
  * Wedriver-manager downloads the file to the node_modules/webdriver-manager/selenium folder. This
  will no longer appear in the protractor directory.

- ([8316917](https://github.com/angular/protractor/commit/83169174243c7ef9767a52d86e649838aa4759f9))
  feat(expectedConditions): adding urlIs and urlContains (#3237)

  * adding urlIs and urlContains
  * tests for UrlIs and UrlContains

## Dependency Upgrades
- ([4353069](https://github.com/angular/protractor/commit/43530693f6cafd1d3cd3407bd5d1088b51ab8101))
  deps(outdated): Update outdated dependencies (#3251)

  Updated the following outdated packages: body-parser, chai, chai-as-promised, glob, jshint, mocha,
  request, saucelabs, typescript, typings

- ([a6cae73](https://github.com/angular/protractor/commit/a6cae73e2266a20751548047f0d3721a5bd73807))
  deps(selenium): upgrade to selenium-webdriver 2.53.2 (#3223)

  closes #3173, closes #3167, closes #3058

- ([128f8e1](https://github.com/angular/protractor/commit/128f8e197e28601cc93228d917a0e37d4ab29a15))
  dep(webdrivermanager): upgrade to 10.1.0 (#3312)

## Other
- ([2a391bc](https://github.com/angular/protractor/commit/2a391bc1264bac2f9906b3cba58b944a42c692e3))
  chore(es7): async/await example

- ([bb65e5a](https://github.com/angular/protractor/commit/bb65e5aff2719eaf247d0821bdf48c512cf18602))
  chore(website): clean up documentation (#3334)

  - Remove getInnerHtml and getOuterHtml from inherited WebElement docs.
  - Remove some of the goog.provide. Only one is required to build the website.

- ([f5dc4f9](https://github.com/angular/protractor/commit/f5dc4f9f9a26699b847ed8a89ce64f332ee78d6d))
  chore(example): add a protractor typescript example (#3323)

# 3.3.0
_The [Protractor Website](http://www.protractortest.org) API docs have been streamlined. We've also, internally, moved to using TypeScript and building down to JS! Also, the logger has been improved._

## Bug Fixes
- ([6f22d5a](https://github.com/angular/protractor/commit/6f22d5ade48f0d97990cbe69d956da122f2f8358))
  fix(bootstrap): fix bootstrap for older versions of angular

  Trying to use the debug label for window.name fails for versions of angular older than 1.2.24. See [#3115](https://github.com/angular/protractor/issues/3115)

- ([bd78dfc](https://github.com/angular/protractor/commit/bd78dfc79b1435d124c994482df6879066079a4d))
  fix(protractor): isPresent() should work with out of bounds errors (#3108)

- ([88dd568](https://github.com/angular/protractor/commit/88dd568c5295234a5211a23e12666e199606e437))
  fix(NoSuchElementError): add 'new' keyword to instantiate class

  The class NoSuchElementError is called without the new keyword in the
  `ElementArrayFinder.prototype.count` causing a `Class constructors cannot be invoked without
  'new'`

  closes #3079

## Features
- ([afdd9d7](https://github.com/angular/protractor/commit/afdd9d730c198dc97e91bb275c036a754c15140e))
  feat(logger): improve logging methods (#3131)

- ([5fa94db](https://github.com/angular/protractor/commit/5fa94db5a9a4787f480389d382eef7e636b45f81))
  feat(exitCodes): adding exit codes for configuration file errors (#3128)

- ([76861fd](https://github.com/angular/protractor/commit/76861fdc4c57c2aaa984e05e46ff9789ce750260))
  feat(element): equals

  Easier to use version of webdriver.WebElement.equals

- ([582411b](https://github.com/angular/protractor/commit/582411b7ad6c0f9176b231dc51dc328b98affbdf))
  feat(driverProvider/sauce) Add build id as a configurable option

## Dependency Upgrades
- ([b4d1664](https://github.com/angular/protractor/commit/b4d1664141b609c5e5790108e3003fe777c248ca))
  deps(jasminewd2): bump jasminewd2 to 0.0.9

- ([b6f1a63](https://github.com/angular/protractor/commit/b6f1a63da77ec88a3f487e5a099df8febe3742aa))
  feat(protractor): Shows locator used when a timeout occurs

- ([de4b33e](https://github.com/angular/protractor/commit/de4b33eaab1546d0ef3a746cfd222e80f0ec28a1))
  feat(webdriver): Added NO_PROXY environment variable support to webdriver-manager

  closes #3046

# 3.2.2
_This release is a hotfix for webdriver-manager iedriver_

## Bug Fix
- ([c6a3b5e](https://github.com/angular/protractor/commit/c6a3b5eab09d95f9d2170e4aface5559cd6b0132))
  fix(webdriver) - fix file type for internet explorer driver file

- ([d3bd170](https://github.com/angular/protractor/commit/d3bd1702040cde5b9d0a3c1578d0d8e16597224c))
  fix(bootstrap): enable debug info before setting defer label

  Note that in most cases, this should not have surfaced as an issue because the base test mock
  modules will also try to turn on debug info.

  Closes #3009

# 3.2.1
_This release is a hotfix for modules that require protractor_

## Bug Fix
- ([6e02934](https://github.com/angular/protractor/commit/6e029341a67cd985bf727285dec2ef10aafe7b6a))
  fix(package): Update module main in package.json to use built.

# 3.2.0

## Features
- ([cae175c](https://github.com/angular/protractor/commit/cae175cbe632828172e9a7065aacfe67dd51d8dd))
  feat(plugins) Calculate skipAngularStability dynamically.

  This allows plugins to turn Protractor's default synchronization on and off as needed.

- ([7372267](https://github.com/angular/protractor/commit/7372267f23cc8586409f9ef914ab801c78992ccd))
  feat(webdriver): add support for custom versions for selenium, chrome driver, and ie driver

- ([1cbbe4f](https://github.com/angular/protractor/commit/1cbbe4fef5c5f2bc0923fd54c53afad71a44af6c))
  feat(config): no globals option

- ([9608201](https://github.com/angular/protractor/commit/960820120cf7df08cff8cfe15a5a9f08612c9773))
  feat(typescript): adding typescript to protractor

  Converting a 3 files over to typescript.

  Adding an `npm prepublish` step that will use gulp to download the typings, transpile the files
  with tscto the built/ directory and copy the rest of the javascript files from lib/ to the built/
  folder.

  Also adding scripts to package.json for `npm run tsc` and `npm run tsc:w` for transpiling help.

- ([a4a7209](https://github.com/angular/protractor/commit/a4a72095d2f95227f1ba293ae047beab28eb761d))
  feat(plugins): skipAngularStability

## Dependency Upgrades
- ([29627f4](https://github.com/angular/protractor/commit/29627f42bb7404f66e3a76ba3cbd85256b408fb6))
  chore(selenium) - upgrade to selenium webdriver v 2.52.0

  See the full changelog at https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/CHANGES.md#v2520

## Bug Fixes
- ([a2c7a4b](https://github.com/angular/protractor/commit/a2c7a4bf1fb2a3a509040ae8ec7737cc002b764e))
  fix(config): Do not sort spec keys

  Fixes #2928

# 3.1.1

## Bug Fixes

- ([4db52f2](https://github.com/angular/protractor/commit/4db52f2a21171ebbc6fed0ca3df760553afc264a))
  test(config): add test for config files using only per-capability specs

  To prevent bugs like #2925 in the future.

- ([edfb52f](https://github.com/angular/protractor/commit/edfb52fadccf10c34d885c37e990dea0efbb0081))
  fix(configParser): use all the suites if no other spec sources are provided

# 3.1.0

## Dependency Version Upgrades

- ([f699718](https://github.com/angular/protractor/commit/f699718e951c07f18c2e3e5414f92b9a33f7b19c))
  updates(selenium): update chromedriver and selenium-standalone

  Selenium-standalone update to 2.51.0. Update chromedriver to 2.21.

  Chromedriver changelog: http://chromedriver.storage.googleapis.com/2.21/notes.txt Selenium
  changelog: https://github.com/SeleniumHQ/selenium/blob/master/dotnet/CHANGELOG

- ([5930d14](https://github.com/angular/protractor/commit/5930d1444aef2f053c132eb437d07f9b000d7803))
  chore(deps): update various npm dependencies to latest stable releases

## Features

- ([3f3805f](https://github.com/angular/protractor/commit/3f3805f9496fb130ae01b3e3278ee1ea7684d8e7))
  feat(attachSession): attach protractor to existing webdriver session

  Attaching an existing selenium browser session to protractor rather than always creating new one.
  The session can be passed into the config file as a string via the sessionId.

- ([b693256](https://github.com/angular/protractor/commit/b6932560d66730203e0e7b0c65c80a44ad4747de))
  feat(webdriver): allow configuration of all SeleniumServer arguments

  You can now pass a complete object of configuration for the SeleniumServer class. This allows
  enabling loopback on the selenium server.

- ([148f020](https://github.com/angular/protractor/commit/148f020bf4bbd71e17326581a2f7ed6f4ff55832))
  feat(protractor): Add support to allow Protractor to test an Angular application which has
  debugging info disabled

  Currently Angular application which for performance reasons, have debug information turn off
  cannot be tested. This PR allows users to add the Angular debug logging flag to the Protractor
  run.

- ([aa5ceb5](https://github.com/angular/protractor/commit/aa5ceb576f0283b6591faaa95e342ef3c603c717))
  feat(webdriver): add support for selenium webdriver proxy

- ([b110ed9](https://github.com/angular/protractor/commit/b110ed92442eb8b14768c512a890bb3ceb0e4973))
  feat(debugger): allow multiple browser.pause()

  After this change, you can put multiple browser.pause() in the code. Each browser.pause() is like
  a traditional breakpoint.

  To detach from the debugger, press ^D (CTRL+D). This will continue code execution until it hits
  the next browser.pause() or code finishes running.

  This PR also fixes a number of small formatting issues.

- ([fb10c5c](https://github.com/angular/protractor/commit/fb10c5caffb895e909ad91d629e2192c74c8e064))
  feat(webdriver): Allow users to use webdriver's disableEnvironmentOverrides

  Fixes #2300

- ([fa0c692](https://github.com/angular/protractor/commit/fa0c692414fa98721dff80202ef95e9b3ccadebb))
  feat(config): allow onComplete to return a promise

  Closes #1944

## Bug Fixes

- ([f533341](https://github.com/angular/protractor/commit/f533341085921409d16d577e38ba1745c37a17b7))
  bug(driverProvider): fix driver path generation for *nix platforms

  Makes error messages better

# 3.0.0

_We're releasing version 3.0 with some breaking changes. In summary - Jasmine 1.3 is removed, only Jasmine 2 is now supported, old Node.JS support is dropped, and plugins now need to be explicitly required. Full details below._

## Dependency Version Upgrades

- ([18e1f71](https://github.com/angular/protractor/commit/18e1f71a4dd868709f4e259e05a8a196921e22be))
  chore(webdriver): upgrade Protractor to webdriver 2.48.2

- ([1f44a6e](https://github.com/angular/protractor/commit/1f44a6ef3f7ae8680a03a3cc7a7c06f75a8c7d4c))
  chore(deps): bump chromedriver and iedriver versions IEDriver from 2.47.0 to 2.48.0

  ChromeDriver from 2.19 to 2.20. Changelog:
  http://chromedriver.storage.googleapis.com/2.20/notes.txt

## Features

- ([97e6703](https://github.com/angular/protractor/commit/97e6703eb0e7a5dffc1017d0a44f0dfeeb91f327))
  feat(protractor): Add protractor.prototype.restart

- ([2007f06](https://github.com/angular/protractor/commit/2007f06078b6569a2cfd9f361f17d765c07bc7f8))
  feat(protractor): add flag to stop protractor from tracking $timeout

- ([a40a4ba](https://github.com/angular/protractor/commit/a40a4ba2a509bc762f1f5937454fdbf074405f07))
  feat(ElementArrayFinder#get): Implemented ability to pass promise as index to
  ElementArrayFinder#get

- ([a54c0e0](https://github.com/angular/protractor/commit/a54c0e0d72b9d7d1d8364ade5046e5007ff53906))
  feat(plugins): Add config option to disable logging of warnings in console plugin

  Running tests in multiple browsers ends up printing out a lot of useless warnings I'm already
  aware of. To make skimming through logs in the case of an actual failure easier, I want to be able
  to disable the logging of warnings in the console plugin.

- ([7015010](https://github.com/angular/protractor/commit/7015010188dfb70c1e49e4f2eae19d5ba1126b34))
  feat(driver providers): Add BrowserStack support.

  Also added BrowserStack to CI

## Bug Fixes

- ([7cba4ec](https://github.com/angular/protractor/commit/7cba4ecf0f3915dfec33dbc04decd42857744b37))
  fix(ng-repeat): properly detect the end of an ng-repeat-start block

  Discovered while investigating issue #2365

## Breaking Changes

- ([2bde92b](https://github.com/angular/protractor/commit/2bde92b3e745e09ad3876932b2d187365e9aaa31))
  chore(jasmine): remove jasmine 1.3

  and update docs. Also, use jasmine 2 for running all Protractor's unit tests.

  BREAKING CHANGE: Now, both jasmine and jasmine2 frameworks use jasmine 2.3. Users still using
  jasmine version <2 will have to upgrade.

- ([18e1f71](https://github.com/angular/protractor/commit/18e1f71a4dd868709f4e259e05a8a196921e22be))
  chore(webdriver): upgrade Protractor to webdriver 2.48.2

  BREAKING CHANGE: 1) Users will no longer be able to use node versions <4. 2) There is significant
  changes to the control flow, and tests may need to be
    modified to be compliant with the new control flow. See
  https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/CHANGES.md

- ([ac1e21e](https://github.com/angular/protractor/commit/ac1e21e7e09a773de981bf9e70b0fcd489d17a83))
  chore(plugins): Split first party plugins into seperate repos

  BREAKING CHANGE:

  The Accessibility, NgHint, Timeline, and Console plugins are now located in their own separate
  node modules. You will need to explicitly require each module you use. See https://github.com/angular/protractor/blob/master/docs/plugins.md#first-party-plugins for info for each module.

- ([ddb8584](https://github.com/angular/protractor/commit/ddb8584a59343284904676ef6d8db5c1c996b900))
  chore(cucumber): Remove cucumber from internal implementation

  BREAKING CHANGE:

  Cucumber has been community maintained for a while, and in order to allow it to move faster, it is no longer part of the core Protractor library. It is now published on npm under `protractor-cucumber-framework` and will require setting `frameworkPath` in your configuration file. See https://github.com/angular/protractor/blob/master/docs/frameworks.md#using-cucumber for full instructions on use now.


# 2.5.1
_This release is a hotfix for node 0.10 support_

- ([039ffa7](https://github.com/angular/protractor/commit/039ffa7bfa291084263ae3fa944bbf21394ce9a3))
  fix(configParser): Remove path.parse so protractor works with node < v0.12

  Closes #2588

# 2.5.0
_This release contains a hotfix for windows path issues and early support for Angular2 apps_


## Features
- ([c5d37c2](https://github.com/angular/protractor/commit/c5d37c2abebf9aa9dd3324df93ac447529eea53b))
  feat(lib): add useAllAngularAppRoots option

  This allows waiting for all angular applications on the page, for angular2 apps only.

- ([f246880](https://github.com/angular/protractor/commit/f24688030a63c9de4ce759ac9c6fab79ef773ed5))
  feat(lib): add support for waiting for angular2

  Use Angular2's testability API, if present, when waiting for stability or loading a page.

  Closes #2396

## Bug Fixes

- ([d6aebba](https://github.com/angular/protractor/commit/d6aebbad6e9b191fef141472887637ee4318438e))
  fix(config): Fixes absolute path parsing in windows

  This allows absolute paths absolute paths in to be properly parsed in windows. This should
  maintain the line-number feature introduced in ff88e without breakage.

- ([04e5bfb](https://github.com/angular/protractor/commit/04e5bfbfcade0cbbef58213bc7b227b5db753d57))
  chore(runner): make plugins optional param for createBrowser


# 2.4.0

_This release contains only a version update to `selenium-webdriver`, webdriver javascript bindings, and associated bug fixes._

## Dependency Version Upgrades
- ([9a202ab](https://github.com/angular/protractor/commit/9a202ab5573f24c9919639f1b75fd9cd2b383383))
  chore(dependencies): update selenium-webdriver to 2.47.0

  Along with it, update `jasminewd2` to avoid situations where the control flow gets locked up and
  hangs.

  *Potential Breaking Change*:

  This is passing all existing Protractor tests, but there is a possibility that the changes to the
  control flow will cause some test flows to hang. If this causes issues, such as tests hanging or commands executing out of order, please revisit your use of functions affecting the control flow, such as `flow.execute`.

  See the selenium-webdriver changelog at https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/CHANGES.md


## Bug Fixes
- ([f034e01](https://github.com/angular/protractor/commit/f034e010156a85cf1826b95eb7f41f50ef5a1791))
  fix(synchronizing): use the same control flow when ignoring sync

  Previously, the order of frames and tasks on the control flow was different depending on
  `browser.ignoreSynchronization`. This fixes the inconsistency by creating an empty task when
  ignoreSynchronization is true.

  Practically, this fixes the polling spec failing after the update to selenium-webdriver@2.47.0.


# 2.3.0

_This release contains updates which fix some issues with dependencies that had gotten stale. However, it does not yet contain an update to the selenium-webdriver dependency, because of potential breaking changes. That update will be done in a separate Protractor@2.4.0 release. See [issue 2245](https://github.com/angular/protractor/issues/2245)._

## Dependency Version Upgrades

- ([cfd8d00](https://github.com/angular/protractor/commit/cfd8d000c2aa1686c4a90164baf4e04976ee0587))
  feat(webdriver): update webdriver and chromedriver to latest version

  Updating Selenium standalone from 2.45.0 to 2.47.0 Updating ChromeDriver from 2.15 to 2.19
  Selenium Changelog:
  https://github.com/SeleniumHQ/selenium/blob/master/javascript/node/selenium-webdriver/CHANGES.md
  ChromeDrive